//*************************************************************************************************
package age.clock;
//*************************************************************************************************

import java.util.ArrayList;
import java.util.List;

//*************************************************************************************************
public class Clock {

	//=============================================================================================
	private final List<Alarm> alarms = new ArrayList<>();
	//=============================================================================================

	//=============================================================================================
	public void add(long nanoperiod, Task task) {
		alarms.add(new Alarm(nanoperiod, task));
	}
	//=============================================================================================

	//=============================================================================================
	public void addFPS(int fps, Task task) {
		alarms.add(new Alarm(1000000000L / fps, task));
	}
	//=============================================================================================
	
	//=============================================================================================
	public void init() {
		long nanotime = System.nanoTime();
		for (Alarm alarm : alarms) {
			alarm.init(nanotime);
		}
	}
	//=============================================================================================

	//=============================================================================================
	// TODO: revisit the thread sleep mechanism (it is not implemented correctly)
	public void update() {
		long nanotime = System.nanoTime();
		for (Alarm alarm : alarms) {
			alarm.update(nanotime);
		}
	}
	//=============================================================================================
	
}
//*************************************************************************************************
