//*************************************************************************************************
package ode.client;
//*************************************************************************************************

import ode.schedule.Scheduler;

//*************************************************************************************************
public class Client implements Runnable {

	//=============================================================================================
	private Scheduler scheduler = new Scheduler();
	private Platform platform = new Platform();
	//=============================================================================================

	//=============================================================================================
	private RunState runstate = RunState.INITIALIZING;
	//=============================================================================================
	
	//=============================================================================================
	public void run() {		
		scheduler.add(1000000000L / 60L, (n,p) -> platform.update());
		scheduler.init();
		platform.init();
		runstate = RunState.RUNNING;
		while (runstate == RunState.RUNNING) {
			scheduler.update();
			Thread.yield();
		}
		platform.done();
		runstate = RunState.TERMINATED;
	}
	//=============================================================================================

	//=============================================================================================
	public boolean terminate() {
		runstate = RunState.TERMINATING;
		return true;
	}
	//=============================================================================================
	
}
//*************************************************************************************************
