//*************************************************************************************************
package ode.overlay.gui;
//*************************************************************************************************

import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import ode.util.Border;
import ode.util.Dimension;
import ode.util.Location;

//*************************************************************************************************
public class Widget {

	//=============================================================================================
	private Widget parent;
	private final List<Widget> children = new ArrayList<>();
	//=============================================================================================	

	//=============================================================================================
	private Location location = new Location();
	private Dimension dimension = new Dimension();
	private Border border = new Border();
	//=============================================================================================

	//=============================================================================================
	private Style style;
	private Layout layout;
	//=============================================================================================
	
	//=============================================================================================	
	public Widget parent() {
		return parent;
	}
	//=============================================================================================	

	//=============================================================================================	
	public List<Widget> children() {
		return Collections.unmodifiableList(children);
	}
	//=============================================================================================	

	//=============================================================================================
	public void link(Widget widget) {
		widget.unlink();
		widget.parent = this;
		children.add(widget);
	}
	//=============================================================================================	

	//=============================================================================================
	public void linkAt(int idx, Widget widget) {
		if (idx >= 0 && idx <= children.size()) {
			widget.unlink();
			widget.parent = this;
			children.add(idx, widget);
		}
	}
	//=============================================================================================	

	//=============================================================================================
	public void linkBefore(Widget widget) {
		int idx = parent.children.indexOf(this);
		parent.linkAt(idx, widget);
	}
	//=============================================================================================	
	
	//=============================================================================================
	public void linkAfter(Widget widget) {
		int idx = parent.children.indexOf(this);
		parent.linkAt(idx+1, widget);
	}
	//=============================================================================================	
	
	//=============================================================================================	
	public void unlink() {
		if (parent != null) {
			if (parent.children.remove(this)) {
				parent = null;				
			}
		}
	}
	//=============================================================================================	

	//=============================================================================================	
	public void head() {
		if (parent != null) {
			parent.children.remove(this);
			parent.children.add(0, this);
		}
	}
	//=============================================================================================	

	//=============================================================================================	
	public void tail() {
		if (parent != null) {
			parent.children.remove(this);
			parent.children.add(0, this);
		}
	}
	//=============================================================================================	

	//=============================================================================================	
	public void up() {
		if (parent != null) {
			int idx = parent.children.indexOf(this);
			if (idx > 0) {
				parent.children.remove(this);
				parent.children.add(idx-1, this);
			}
		}
	}
	//=============================================================================================	

	//=============================================================================================	
	public void down() {
		if (parent != null) {
			int idx = parent.children.indexOf(this);
			if (idx < parent.children.size()-1) {
				parent.children.remove(this);
				parent.children.add(idx+1, this);
			}
		}
	}
	//=============================================================================================	

	//=============================================================================================	
	public float x() {
		return location.x;
	}
	//=============================================================================================	

	//=============================================================================================	
	public float y() {
		return location.y;
	}
	//=============================================================================================	

	//=============================================================================================	
	public float width() {
		return dimension.width;
	}
	//=============================================================================================	

	//=============================================================================================	
	public float height() {
		return dimension.height;
	}
	//=============================================================================================

	//=============================================================================================
	public void location(Location l) {
		location.x = l.x;
		location.y = l.y;
	}
	//=============================================================================================
	
	//=============================================================================================
	public void location(float x, float y) {
		location.x = x;
		location.y = y;
	}
	//=============================================================================================

	//=============================================================================================
	public void dimension(Dimension d) {
		dimension.width = d.width;
		dimension.height = d.height;
	}	//=============================================================================================
	
	//=============================================================================================
	public void dimension(float w, float h) {
		dimension.width = w;
		dimension.height = h;
	}
	//=============================================================================================

	//=============================================================================================
	public Style style() {
		return style;
	}
	//=============================================================================================

	//=============================================================================================
	public void style(Style style) {
		this.style = style;
	}
	//=============================================================================================
	
	//=============================================================================================
	public Layout layout() {
		return layout;
	}
	//=============================================================================================

	//=============================================================================================
	public void layout(Layout layout) {
		this.layout = layout;
	}
	//=============================================================================================

	//=============================================================================================
	public void applyLayout() {
		layout.layout(this);
	}
	//=============================================================================================
	
}
//*************************************************************************************************
