//*************************************************************************************************
package ode.schedule;
//*************************************************************************************************

//*************************************************************************************************
class Schedule {

	//=============================================================================================
	private long period;
	private Task task;
	//=============================================================================================

	//=============================================================================================
	private long mark;
	//=============================================================================================
	
	//=============================================================================================
	/**
	 * 
	 * @param period - time period between schedules in nano time 
	 * @param period - the task reference to perform when the schedule is triggered
	 */
	public Schedule(long period, Task task) {
		this.period = period;
		this.task = task;
	}
	//=============================================================================================

	//=============================================================================================
	/**
	 * 
	 * @param current - current nano time
	 */
	public void init(long current) {
		this.mark = current;
	}
	//=============================================================================================

	//=============================================================================================
	/**
	 * 
	 * @param current - current nano time
	 */
	public void update(long current) {
		long delta = current - this.mark;
		long count = delta / period;
		if (count >= 1L) {
			task.execute(count, period);
			this.mark += count * period; 
		}
	}
	//=============================================================================================
	
}
//*************************************************************************************************
