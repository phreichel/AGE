//*************************************************************************************************
package ode.platform;
//*************************************************************************************************

import com.jogamp.opengl.GLAutoDrawable;
import com.jogamp.opengl.GLEventListener;

import ode.asset.JOGLTextureManager;
import ode.asset.ODEAssets;
import ode.gui.GUI;
import ode.model.Model;

//*************************************************************************************************
class NEWTGraphicsAdapter implements GLEventListener {

	//=============================================================================================
	private Graphics  graphics = new Graphics();
	private ODEAssets assets = new ODEAssets(new JOGLTextureManager());
	private GUI       gui = null;
	private Model     model = null;
	//=============================================================================================

	//=============================================================================================
	public void register(Model model) {
		this.model = model; 
	}
	//=============================================================================================
	
	//=============================================================================================
	public void register(GUI gui) {
		this.gui = gui; 
	}
	//=============================================================================================
	
	//=============================================================================================
	public void init(GLAutoDrawable drawable) {
	}
	//=============================================================================================

	//=============================================================================================
	public void reshape(GLAutoDrawable drawable, int x, int y, int width, int height) {
		gui.resize(width, height);
	}
	//=============================================================================================
	
	//=============================================================================================
	public void display(GLAutoDrawable drawable) {
		graphics.init(assets, drawable);
		graphics.startFrame();
		model.render(graphics);
		graphics.clearDepth();
		gui.render(graphics);
	}
	//=============================================================================================

	//=============================================================================================
	public void dispose(GLAutoDrawable drawable) {
	}
	//=============================================================================================

}
//*************************************************************************************************
