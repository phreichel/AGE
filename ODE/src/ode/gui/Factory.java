//*************************************************************************************************
package ode.gui;

import ode.msg.Msg;

//*************************************************************************************************

//*************************************************************************************************
public class Factory {

	//=============================================================================================
	private GUI gui;
	//=============================================================================================

	//=============================================================================================
	public Factory(GUI gui) {
		this.gui = gui;
	}
	//=============================================================================================

	//=============================================================================================
	public Builder newWidget() {
		return gui.newBuilder()
			.set(Flag.DISPLAYED);
	}
	//=============================================================================================

	//=============================================================================================
	public Builder newLabel(String text) {
		return newWidget()
			.text(text)
			.foreground(0, 0, 0, 0)
			.background(0, 0, 0, 0)
			.dimension(150, 20);
	}
	//=============================================================================================
	
	//=============================================================================================
	public Builder newFrame() {
		return newWidget()
			.foreground(1, .8f, 0, 1)
			.background(.6f, .6f, .6f, 1);
	}
	//=============================================================================================

	//=============================================================================================
	public Builder newBox() {
		return newWidget()
			.foreground(1, 1, 1, 1)
			.background(.8f, .8f, .8f, 1);
	}
	//=============================================================================================
	
	//=============================================================================================
	public Builder newButton(String text) {	
		return newButton(null, text)
			.onPointerEnter(this::buttonOnPointerEnter)
			.onPointerExit(this::buttonOnPointerExit);
	}
	//=============================================================================================
	
	//=============================================================================================
	public Builder newButton(
			String icon,
			String text) {
		return newWidget()
			.foreground(1, .8f, 0, 1)
			.background(.4f, .4f, 1f, 1)
			.icon(icon)
			.text(text)
			.dimension(100, 20);
	}
	//=============================================================================================

	//=============================================================================================
	public Builder newToolButton(String caption) {
		return newButton(caption)
			.font("ode.font.title")
			.dimension(20, 20);
	}
	//=============================================================================================

	//=============================================================================================
	public Builder newTitlebar(String caption) {
		return newBox()
			.foreground(1, 1, 1, 1)
			.background(.6f, .6f, .8f, 1)
			.child(
				newLabel(caption)
				.position(3, -3)
				.font("ode.font.title")
				.widget()
			);
	}
	//=============================================================================================
	
	//=============================================================================================
	public Builder newWindow(String caption, float w, float h) {
		return newFrame()
			.dimension(w, h)
			.child(
				newTitlebar(caption)
					.position(5, 5)
					.dimension(w-85, 20)
					.widget(),
				newToolButton("*")
					.position(w-75, 5)
					.widget(),
				newToolButton("+")
					.position(w-50, 5)
					.widget(),
				newToolButton("X")
					.position(w-25, 5)
					.onPointerClick(this::windowCloseOnPointerClick)
					.widget(),
				newBox()
					.position(5, 30)
					.dimension(w-10, h-35)
					.widget()
			);
	}
	//=============================================================================================

	//=============================================================================================
	private void buttonOnPointerEnter(Msg msg, Widget widget) {
		widget.background(1f, .4f, .4f, 1);
	}
	//=============================================================================================

	//=============================================================================================
	private void buttonOnPointerExit(Msg msg, Widget widget) {
		widget.background(.4f, .4f, 1f, 1);
	}
	//=============================================================================================

	//=============================================================================================
	private void windowCloseOnPointerClick(Msg msg, Widget widget) {
		widget.parent().clear(Flag.DISPLAYED);
	}
	//=============================================================================================
	
}
//*************************************************************************************************
