//*************************************************************************************************
package age.mesh.mtl;
//*************************************************************************************************

import java.util.HashMap;
import java.util.Map;
import age.mesh.Material;

//*************************************************************************************************
public class MaterialMapBuilder implements MaterialBuilder {

	//=============================================================================================
	private final Map<String, Material> map = new HashMap<>();
	private Material material = null;
	//=============================================================================================
	
	//=============================================================================================
	public void startFile() {
		map.clear();
	}
	//=============================================================================================

	//=============================================================================================
	public void endFile() {}
	//=============================================================================================

	//=============================================================================================
	public void startNewMaterial(String name) {
		material = new Material();
		map.put(name, material);
	}
	//=============================================================================================

	//=============================================================================================
	public void writeIllum(int illum) {
		material.illumination = illum;
	}
	//=============================================================================================

	//=============================================================================================
	public void writeNs(float Ns) {
		material.shininess = Ns * (128f / 1000f);
	}
	//=============================================================================================

	//=============================================================================================
	public void writeNi(float Ni) {
		material.refraction = Ni;
	}
	//=============================================================================================

	//=============================================================================================
	public void writeD(float d) {
		material.dissolve = d;
	}
	//=============================================================================================

	//=============================================================================================
	public void writeTr(float Tr) {
		material.dissolve = 1f - Tr;
	}
	//=============================================================================================

	//=============================================================================================
	public void writeKa(float r, float g, float b) {
		material.ambience.set(r, g, b);
	}
	//=============================================================================================

	//=============================================================================================
	public void writeKd(float r, float g, float b) {
		material.diffuse.set(r, g, b);
	}
	//=============================================================================================

	//=============================================================================================
	public void writeKs(float r, float g, float b) {
		material.specular.set(r, g, b);
	}
	//=============================================================================================

	//=============================================================================================
	public void writeKe(float r, float g, float b) {
		material.emission.set(r, g, b);
	}
	//=============================================================================================

	//=============================================================================================
	public void writeSpecularMap(String name) {
		material.specular_map = name;
	}
	//=============================================================================================

	//=============================================================================================
	public void writeAmbientMap(String name) {
		material.ambient_map = name;
	}
	//=============================================================================================
	
	//=============================================================================================
	public void writeDiffuseMap(String name) {
		material.diffuse_map = name;
	}
	//=============================================================================================

	//=============================================================================================
	public void writeBumpMap(String name) {
		material.bump_map = name;
	}
	//=============================================================================================
	
	//=============================================================================================
	public void build(Map<String, Material> dst) {
		dst.putAll(map);
		map.clear();
	}
	//=============================================================================================
	
}
//*************************************************************************************************
