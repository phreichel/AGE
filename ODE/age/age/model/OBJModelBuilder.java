//*************************************************************************************************
package age.model;
//*************************************************************************************************

import java.util.ArrayList;
import java.util.Collections;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import age.mesh.obj.ObjectBuilder;
import age.util.X;

//*************************************************************************************************
public class OBJModelBuilder implements ObjectBuilder{

	//=============================================================================================
	private final List<Float> lstpos = new ArrayList<>();
	private final List<Float> lsttex = new ArrayList<>();
	private final List<Float> lstnorm = new ArrayList<>();
	//=============================================================================================

	//=============================================================================================
	private final List<Integer> idxpos = new ArrayList<>();
	private final List<Integer> idxtex = new ArrayList<>();
	private final List<Integer> idxnorm = new ArrayList<>();
	//=============================================================================================

	//=============================================================================================
	private final List<String> material = new ArrayList<>();
	private final List<Integer> mark = new ArrayList<>();
	//=============================================================================================
	
	//=============================================================================================
	public void startFile() {}
	public void endFile() {}
	//=============================================================================================

	//=============================================================================================
	public void startGroup(String name) {}
	public void endGroup() {}
	//=============================================================================================

	//=============================================================================================
	public void startObject(String name) {}
	public void endObject() {}
	//=============================================================================================

	//=============================================================================================
	public void writeVertex(float vx, float vy, float vz, float vw) {
		lstpos.add(vx);
		lstpos.add(vy);
		lstpos.add(vz);
	}
	//=============================================================================================

	//=============================================================================================
	public void writeNormal(float nx, float ny, float nz) {
		lstnorm.add(nx);
		lstnorm.add(ny);
		lstnorm.add(nz);
	}
	//=============================================================================================

	//=============================================================================================
	public void writeTexture(float tu, float tv, float tw) {
		lsttex.add(tu);
		lsttex.add(tv);
	}
	//=============================================================================================

	//=============================================================================================
	public void writeParameter(float pu, float pv, float pw) {
		throw new X("Not supported");
	}
	//=============================================================================================

	//=============================================================================================
	public void startFace() {}
	public void endFace() {}
	//=============================================================================================

	//=============================================================================================
	public void writeFaceIndex(int iv, int it, int in) {
		idxpos.add(iv);
		idxtex.add(it);
		idxnorm.add(in);
	}
	//=============================================================================================

	//=============================================================================================
	public void startLine() {}
	public void endLine() {}
	//=============================================================================================

	//=============================================================================================
	public void writeLineIndex(int idx) {
		idxpos.add(idx);
		idxtex.add(0);
		idxnorm.add(0);
	}
	//=============================================================================================

	//=============================================================================================
	public void materialLib(String path, Map<String, Material> materials) {
	}
	//=============================================================================================

	//=============================================================================================
	public void materialUse(String name) {
		material.add(name);
		mark.add(idxpos.size());
	}	
	//=============================================================================================

	//=============================================================================================
	private static final float[] TPL_FLOAT_ARRAY = {}; 
	//=============================================================================================
	
	//=============================================================================================
	public Model build() {
		Mesh mesh = new Mesh(
			lstpos.toArray(TPL_FLOAT_ARRAY),
			lsttex.toArray(TPL_FLOAT_ARRAY),
			lstnorm.toArray(TPL_FLOAT_ARRAY));
		
	}
	//=============================================================================================

	//=============================================================================================
	private void clear() {
		lstpos.clear();
		idxpos.clear();
		lsttex.clear();
		idxtex.clear();
		lstnorm.clear();
		idxnorm.clear();
		material.clear();
		mark.clear();
	}
	//=============================================================================================
	
}
//*************************************************************************************************
